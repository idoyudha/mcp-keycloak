runtime: "container"
startCommand:
  type: "stdio"
  configSchema:
    type: "object"
    properties:
      keycloakUrl:
        type: "string"
        description: "Keycloak server URL"
      keycloakRealm:
        type: "string"
        description: "Keycloak realm"
      keycloakClientId:
        type: "string"
        description: "Keycloak client ID"
      keycloakClientSecret:
        type: "string"
        description: "Keycloak client secret"
    required: ["keycloakUrl", "keycloakRealm", "keycloakClientId", "keycloakClientSecret"]
  commandFunction: |-
    (config) => ({
      command: 'uv',
      args: ['run', 'python', '-m', 'src.main'],
      env: {
        SERVER_URL: config.keycloakUrl,
        REALM_NAME: config.keycloakRealm,
        CLIENT_ID: config.keycloakClientId,
        CLIENT_SECRET: config.keycloakClientSecret
      }
    })
build:
  dockerfile: "Dockerfile"
  dockerBuildPath: "."